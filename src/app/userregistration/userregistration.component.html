<div class="ui card regcard">
  <div *ngIf="!confirmFlag; else confirmEntry" style="padding: 10px; ">
    <form class="ui form" [formGroup]="registrationForm">
        <div class="header"><h4 class="ui dividing header">User Registration Form</h4></div>
        <div class="field">
          <label style="color: red">Name *</label>
          <div class="two wide fields">
            <div class="field">
              <input type="text" name="firstname" placeholder="First Name" formControlName = "firstname">
              <div *ngIf="firstname.invalid && (firstname.dirty || firstname.touched)">
                <div style="color: red" *ngIf="firstname.errors.required">First Name is required</div>
              </div>
            </div>
            <div class="field">
              <input type="text" name="lastname" placeholder="Last Name" formControlName = "lastname">
              <div *ngIf="lastname.invalid && (lastname.dirty || lastname.touched)">
                <div style="color: red" *ngIf="lastname.errors.required">Last Name is required</div>
              </div>
            </div>
          </div>
        </div>
        <div class="two fields">
          <div class="field">
            <label>Address</label>
              <input type="text" name="address" placeholder="Address" formControlName = "address">
          </div>
          <div class="field">
            <label>Date Of Birth</label>
            <div class="input-group">
              <input class="form-control" name="dateofbirth" placeholder="yyyy-mm-dd" formControlName="dateofbirth" ngbDatepicker #d="ngbDatepicker">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"></button>
              </div>
            </div>
            <div *ngIf="dateofbirth.invalid && (dateofbirth.dirty || dateofbirth.touched)">
              <div style="color: red" >Date is invalid</div>
            </div>
          </div>
        </div>
        <div class="three fields">
          <div class="field">
            <label style="color: red">City *</label>
            <input type="text" name="city" placeholder="City" formControlName = "city">
            <div *ngIf="city.invalid && (city.dirty || city.touched)">
              <div style="color: red" *ngIf="city.errors.required">City is required</div>
            </div>
        </div>
          <div class="field">
            <label style="color: red">Country *</label>
            <input type="text" name="country" placeholder="Country" formControlName = "country">
            <div *ngIf="country.invalid && (country.dirty || country.touched)">
              <div style="color: red" *ngIf="country.errors.required">Country is required</div>
            </div>
          </div>
          <div class="field">
            <label style="color: red">Pin Code * </label>
            <input type="number" name="pincode" placeholder="Pin Code" formControlName = "pincode">
            <div *ngIf="pincode.invalid && (pincode.dirty || pincode.touched)">
              <div style="color: red" *ngIf="pincode.errors.required">Provide a Valid Pin Code</div>
            </div>
          </div>
        </div>
        <div class="field">
          <label>Upload Photo</label>
          <div class="two wide fields">
            <div class="image-preview mb-3" *ngIf="previewUrl">
              <img [src]="previewUrl" height="200" />                 
            </div>
            <div class="field">
              <input type="file" (change)="uploadFile($event)">
            </div>
          </div>
        </div>
            
        <button (click) = "submitUserDetails()" class="ui primary button">
          Save
        </button>
        <button (click)="resetForm()" class="ui button">
          Reset
        </button>
        <button (click)="exitForm()" class="ui button">
          Cancel
        </button>
    </form>  
  </div>

  <ng-template #confirmEntry>
    <div style="padding: 10px; height: 250px;">
      <div style="text-align: center; left: 50%;"><b>{{confirmMessage}}</b></div>
    </div>

    <div style="padding: 10px">
      <button (click) = "addUser()" class="ui primary button">
        Add User
      </button>
      <button (click)="exitForm()" class="ui button">
        Exit
      </button>
    </div>
  </ng-template>
</div>